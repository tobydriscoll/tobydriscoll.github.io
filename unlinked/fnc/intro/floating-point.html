

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Floating-point numbers &#8212; Fundamentals of Numerical Computation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../_static/sphinx-book-theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../_static/jupyter-sphinx.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/sphinx-book-theme.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/mystnb.js"></script>
    <script src="../_static/proof.js"></script>
    <script src="../_static/sphinx-book-theme.js"></script>
    <script >var togglebuttonSelector = '.toggle, .secondtoggle, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"TeX": {"Macros": {"float": ["\\mathbb{F}"], "real": ["\\mathbb{R}"], "complex": ["\\mathbb{C}"], "nat": ["\\mathbb{N}"], "integer": ["\\mathbb{Z}"], "rmn{([^}]*)}{([^}]*)}": ["\\mathbb{R}^{#1 \\times #2}", 2], "dd{([^}]*)}{([^}]*)}": ["\\frac{d #1}{d #2}", 2], "ddd{([^}]*)}{([^}]*)}": ["\\frac{d^2 #1}{d #2^2}", 2], "pp{([^}]*)}{([^}]*)}": ["\\frac{\\partial #1}{\\partial #2}", 2], "ppp{([^}]*)}{([^}]*)}": ["\\frac{\\partial^2 #1}{\\partial #2^2}", 2], "ppdd{([^}]*)}{([^}]*)}{([^}]*)}": ["\\frac{\\partial^2 #1}{\\partial #2 \\partial #3}", 3], "norm{([^}]*)}": ["\\| #1 \\|", 1], "twonorm{([^}]*)}": ["\\| #1 \\|_2", 1], "onenorm{([^}]*)}": ["\\| #1 \\|_1", 1], "infnorm{([^}]*)}": ["\\| #1 \\|_\\infty", 1], "anynorm{([^}]*)}{([^}]*)}": ["\\| #1 \\|_#2", 2], "innerprod{([^}]*)}{([^}]*)}": ["\\langle #1,#2 \\rangle", 2], "pr{([^}]*)}": ["^{(#1)}", 1], "kron{([^}]*)}{([^}]*)}": ["#1 \\otimes #2", 2], "eye{([^}]*)}": ["\\mathbf{e}_#1", 1], "meye": ["\\mathbf{I}"], "Qhat": ["\\hat{\\mathbf{Q}}"], "Rhat": ["\\hat{\\mathbf{R}}"], "bfalpha": ["\\mathbf{alpha}"], "bfdelta": ["\\mathbf{delta}"], "bfzero": ["\\boldsymbol{0}"], "macheps": ["\\epsilon_\\text{mach}"], "fl": ["\\operatorname{fl}"], "diag": ["\\operatorname{diag}"], "ign": ["\\operatorname{sign}"], "Re": ["\\operatorname{Re}"], "Im": ["\\operatorname{Im}"], "ee": ["\\times 10^"], "lnorm": ["\\|"], "rnorm": ["\\|"], "floor": ["\\lfloor#1\\rfloor", 1]}}})</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Problems and conditioning" href="conditioning.html" />
    <link rel="prev" title="Introduction" href="overview.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Fundamentals of Numerical Computation</h1>
  
</a>
</div>

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>

<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  
  <ul class="nav sidenav_l1">
  <li class="">
    <a href="../frontmatter.html">Front matter</a>
  </li>
  <li class="active">
    <a href="overview.html">Introduction</a>
  <ul class="nav sidenav_l2">
    <li class="active">
      <a href="">Floating-point numbers</a>
    </li>
    <li class="">
      <a href="conditioning.html">Problems and conditioning</a>
    </li>
    <li class="">
      <a href="algorithms.html">Algorithms</a>
    </li>
    <li class="">
      <a href="stability.html">Stability</a>
    </li>
  </ul>
  </li>
  <li class="">
    <a href="../linsys/overview.html">Square linear systems</a>
  </li>
  <li class="">
    <a href="../leastsq/overview.html">Overdetermined linear systems</a>
  </li>
  <li class="">
    <a href="../nonlineqn/overview.html">Roots of nonlinear equations</a>
  </li>
  <li class="">
    <a href="../localapprox/overview.html">Piecewise interpolation</a>
  </li>
  <li class="">
    <a href="../ivp/overview.html">Initial-value problems for ODEs</a>
  </li>
  <li class="">
    <a href="../appendix/linear-algebra.html">Review: Linear algebra</a>
  </li>
  <li class="">
    <a href="../appendix/demos.html">All demo notebooks</a>
  </li>
  <li class="">
    <a href="../genindex.html">Index</a>
  </li>
</ul>
</nav>

 <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse" data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu" aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation" title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        <div class="dropdown-buttons-trigger">
            <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i class="fas fa-download"></i></button>

            
            <div class="dropdown-buttons">
                <!-- ipynb file if we had a myst markdown file -->
                
                <!-- Download raw file -->
                <a class="dropdown-buttons" href="../_sources/intro/floating-point.md.txt"><button type="button" class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip" data-placement="left">.md</button></a>
                <!-- Download PDF via print -->
                <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF" onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
            </div>
            
        </div>

        <!-- Edit this page -->
        

        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="bottom" onclick="toggleFullScreen()" title="Fullscreen mode"><i class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->
        
    </div>
    <div class="d-none d-md-block col-md-2 bd-toc show">
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#precision-and-accuracy" class="nav-link">Precision and accuracy</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#double-precision" class="nav-link">Double precision</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#floating-point-arithmetic" class="nav-link">Floating point arithmetic</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#exercises" class="nav-link">Exercises</a>
        </li>
    
    </ul>
</nav>


    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="floating-point-numbers">
<h1>Floating-point numbers<a class="headerlink" href="#floating-point-numbers" title="Permalink to this headline">Â¶</a></h1>
<p>The real number set <span class="math notranslate nohighlight">\(\real\)</span> is infinite in two ways: it is unbounded and continuous. In most practical computing, the second kind of infiniteness is much more consequential than the first kind, so we turn our attention there first. We replace <span class="math notranslate nohighlight">\(\real\)</span> with the set <span class="math notranslate nohighlight">\(\float\)</span> of <a class="reference internal" href="overview.html#term-floating-point-numbers"><span class="xref std std-term">floating point numbers</span></a> <span class="target" id="index-0"></span>floating point numbers, whose members are zero and all numbers of the form</p>
<div class="math notranslate nohighlight" id="equation-floatpoint">
<span class="eqno">(1)<a class="headerlink" href="#equation-floatpoint" title="Permalink to this equation">Â¶</a></span>\[  \pm (1 + f) \times 2^e,\]</div>
<p id="index-1">where <span class="math notranslate nohighlight">\(e\)</span> is an integer called the <strong>exponent</strong>, and <span class="math notranslate nohighlight">\(1+f\)</span> is the <span class="target" id="index-2"></span>mantissa <strong>mantissa</strong> or <strong>significand</strong>, in which</p>
<div class="math notranslate nohighlight" id="equation-mantissa">
<span class="eqno">(2)<a class="headerlink" href="#equation-mantissa" title="Permalink to this equation">Â¶</a></span>\[  f = \sum_{i=1}^d b_i \, 2^{-i}, \qquad b_i\in\{0,1\},\]</div>
<p>for a fixed integer <span class="math notranslate nohighlight">\(d\)</span>. Equation <a class="reference internal" href="#equation-mantissa">(2)</a> represents the mantissa as a number in <span class="math notranslate nohighlight">\([1,2)\)</span> in base-2 form. Equivalently,</p>
<div class="math notranslate nohighlight">
\[   f = 2^{-d}\, \sum_{i=1}^{d} b_{i} \, 2^{d-i} = 2^{-d} z,\]</div>
<p>for an integer <span class="math notranslate nohighlight">\(z\)</span> in the set <span class="math notranslate nohighlight">\(\{0,1,\ldots,2^d-1\}\)</span>. Consequently, starting at <span class="math notranslate nohighlight">\(2^e\)</span> and ending just before <span class="math notranslate nohighlight">\(2^{e+1}\)</span> there are exactly <span class="math notranslate nohighlight">\(2^d\)</span> evenly spaced numbers belonging to <span class="math notranslate nohighlight">\(\float\)</span>.</p>
<div class="proof proof-type-example" id="id3">

    <div class="proof-title">
        <span class="proof-type">Example 1</span>
        
    </div><div class="proof-content">
<p>Suppose <span class="math notranslate nohighlight">\(d=2\)</span>. Hence with <span class="math notranslate nohighlight">\(e=0\)</span> in <a class="reference internal" href="#equation-floatpoint">(1)</a>, we see that <span class="math notranslate nohighlight">\(1\)</span>, <span class="math notranslate nohighlight">\(5/4\)</span>, <span class="math notranslate nohighlight">\(3/2\)</span>, and <span class="math notranslate nohighlight">\(7/4\)</span> are floating point numbers. They are the only members of <span class="math notranslate nohighlight">\(\float\)</span> in the half-interval <span class="math notranslate nohighlight">\([1,2)\)</span>. Taking <span class="math notranslate nohighlight">\(e=1\)</span> gives the floating point numbers in <span class="math notranslate nohighlight">\([2,4)\)</span>, specifically <span class="math notranslate nohighlight">\(2\)</span>, <span class="math notranslate nohighlight">\(2.5\)</span>, <span class="math notranslate nohighlight">\(3\)</span>, and <span class="math notranslate nohighlight">\(3.5\)</span>. Generally the spacing between the elements of <span class="math notranslate nohighlight">\(\float\)</span> in <span class="math notranslate nohighlight">\([2^e,2^{e+1})\)</span> is <span class="math notranslate nohighlight">\(2^{e-d}\)</span>.</p>
</div></div><p id="index-3">Observe that the smallest element of <span class="math notranslate nohighlight">\(\float\)</span> that is greater than 1 is <span class="math notranslate nohighlight">\(1+2^{-d}\)</span>. We define <a class="reference internal" href="overview.html#term-machine-epsilon"><span class="xref std std-term">machine epsilon</span></a> (or <strong>machine precision</strong>) as <span class="math notranslate nohighlight">\(\macheps = 2^{-d}\)</span>.<a class="footnote-reference brackets" href="#macheps" id="id1">1</a></p>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<p>The distance between the floating-point numbers in <span class="math notranslate nohighlight">\(\pm[2^e,2^{e+1})\)</span> is <span class="math notranslate nohighlight">\(2^e\macheps\)</span>.</p>
</div>
<div class="proof proof-type-demo">

    <div class="proof-title">
        <span class="proof-type">Demo </span>
        
    </div><div class="proof-content">
<p><a class="reference internal" href="demos/float-julia.html"><span class="doc">Floating point in Julia</span></a></p>
</div></div><p>We also suppose the existence of a rounding function <span class="math notranslate nohighlight">\(\fl(x)\)</span> that maps every real <span class="math notranslate nohighlight">\(x\)</span> to the nearest member of <span class="math notranslate nohighlight">\(\float\)</span>. If <span class="math notranslate nohighlight">\(x\)</span> is positive, we know that it lies in some interval <span class="math notranslate nohighlight">\([2^e,2^{e+1})\)</span>, where the spacing between elements of <span class="math notranslate nohighlight">\(\float\)</span> is <span class="math notranslate nohighlight">\(2^{e-d}\)</span>. Therefore we conclude that <span class="math notranslate nohighlight">\(|\fl(x)-x| \le \tfrac{1}{2}(2^{e-d})\)</span>, which leads to the bound</p>
<div class="math notranslate nohighlight" id="equation-fpbound">
<span class="eqno">(3)<a class="headerlink" href="#equation-fpbound" title="Permalink to this equation">Â¶</a></span>\[\frac{|\fl(x)-x|}{|x|} \le \frac{2^{e-d-1}}{2^e} \le  \tfrac{1}{2}\macheps.\]</div>
<p>Equation <a class="reference internal" href="#equation-fpbound">(3)</a> holds true for negative <span class="math notranslate nohighlight">\(x\)</span> as well. A mathematically equivalent (see <code class="xref any docutils literal notranslate"><span class="pre">this</span> <span class="pre">exercise</span></code>) and sometimes more convenient statement is that</p>
<div class="math notranslate nohighlight" id="equation-fpboundalt">
<span class="eqno">(4)<a class="headerlink" href="#equation-fpboundalt" title="Permalink to this equation">Â¶</a></span>\[  \fl(x)=x(1+\epsilon), \quad \text{for some $|\epsilon|\le \tfrac{1}{2}\macheps$.}\]</div>
<p>The value of <span class="math notranslate nohighlight">\(\epsilon\)</span> depends on <span class="math notranslate nohighlight">\(x\)</span>, but this dependence is not usually shown explicitly.</p>
<div class="section" id="precision-and-accuracy">
<h2>Precision and accuracy<a class="headerlink" href="#precision-and-accuracy" title="Permalink to this headline">Â¶</a></h2>
<p>The upshot of floating point representation, as stated in <a class="reference internal" href="#equation-fpbound">(3)</a>, is that every real number is represented with a uniformly bounded relative precision. Except for the use of base 2 rather than base 10, floating point representation is a form of scientific notation. For example, Planckâs constant is <span class="math notranslate nohighlight">\(6.626068\times 10^{-34}\)</span> <span class="math notranslate nohighlight">\(\text{m}^2\text{kg}/\text{s}\)</span>. If we alter just the last digit from <span class="math notranslate nohighlight">\(8\)</span> to <span class="math notranslate nohighlight">\(9\)</span>, the relative change is</p>
<p>\begin{equation*}
\frac{0.000001\times 10^{-34}}{6.626068\times 10^{-34}} \approx 1.51\times 10^{-7}.
\end{equation*}</p>
<p>This observation justifies the statement that the constant is given with 7 <span class="target" id="index-4"></span>significant digits significant digits of precision in base 10. Thatâs in contrast to saying that the value is given to 40 decimal places. A major advantage of floating point is that the relative precision does not depend on the choice of physical units. For instance, when expressed in <span class="math notranslate nohighlight">\(\text{eV}\cdot\text{sec}\)</span>, Planckâs constant is <span class="math notranslate nohighlight">\(4.135668\times 10^{-15}\)</span>, which has still 7 digits but only 21 decimal places.</p>
<p>It can be easy to confuse the terms <strong>precision</strong> and <strong>accuracy</strong>, especially when looking at the result of a calculation on the computer. The precision of a floating point number is always <span class="math notranslate nohighlight">\(d\)</span> binary digits, but not all of those digits may accurately represent an intended value.</p>
<p>Suppose <span class="math notranslate nohighlight">\(x\)</span> is a number of interest and <span class="math notranslate nohighlight">\(\tilde{x}\)</span> is an approximation to it. The <strong>absolute accuracy</strong> of <span class="math notranslate nohighlight">\(\tilde{x}\)</span> is</p>
<div class="math notranslate nohighlight">
\[|\tilde{x} - x|,\]</div>
<p>while the <strong>relative accuracy</strong> is</p>
<div class="math notranslate nohighlight">
\[\frac{|\tilde{x} - x|}{|x|},\]</div>
<p>Absolute accuracy has the same units as <span class="math notranslate nohighlight">\(x\)</span>, while relative accuracy is dimensionless. We can also express the relative accuracy as</p>
<div class="math notranslate nohighlight" id="equation-sigdig">
<span class="eqno">(5)<a class="headerlink" href="#equation-sigdig" title="Permalink to this equation">Â¶</a></span>\[\text{accurate digits} = -\log_{10} \left| \frac{\tilde{x}-x}{x} \right|.\]</div>
<p>We often round this down to an integer, but it does make sense to speak of âalmost seven digitsâ or âten and a half digits.â</p>
<div class="proof proof-type-demo">

    <div class="proof-title">
        <span class="proof-type">Demo </span>
        
    </div><div class="proof-content">
<p><a class="reference internal" href="demos/float-accuracy.html"><span class="doc">Absolute and relative accuracy</span></a></p>
</div></div></div>
<div class="section" id="double-precision">
<h2>Double precision<a class="headerlink" href="#double-precision" title="Permalink to this headline">Â¶</a></h2>
<span class="target" id="index-5"></span><p id="index-6">Most numerical computing today is done in the <em>IEEE 754</em> standard. This defines <strong>single precision</strong> with <span class="math notranslate nohighlight">\(d=23\)</span> binary digits for the fractional part <span class="math notranslate nohighlight">\(f\)</span>, and the much more commonly used <a class="reference internal" href="overview.html#term-double-precision"><span class="xref std std-term">double precision</span></a> with <span class="math notranslate nohighlight">\(d=52\)</span>. In double precision,</p>
<div class="math notranslate nohighlight" id="equation-doubleprec">
<span class="eqno">(6)<a class="headerlink" href="#equation-doubleprec" title="Permalink to this equation">Â¶</a></span>\[\macheps = 2^{-52} \approx 2.2\times 10^{-16}.\]</div>
<p>We often speak of double-precision floating point numbers as having about 16 decimal digits. The 52-bit mantissa is paired with a sign bit and 11 binary bits to represent the exponent <span class="math notranslate nohighlight">\(e\)</span> in <a class="reference internal" href="#equation-floatpoint">(1)</a>, for a total of 64 binary bits per floating point number.</p>
<p>Our theoretical description of <span class="math notranslate nohighlight">\(\float\)</span> did not place limits on the exponent, but in double precision its range is limited to <span class="math notranslate nohighlight">\(-1022\le e \le 1023\)</span>. Thus, the largest number is just short of <span class="math notranslate nohighlight">\(2^{1024}\approx 2\times 10^{308}\)</span>, which is more than enough in most applications. Results that should be larger are said to <span class="target" id="index-7"></span>overflow and will actually result in the value <code class="docutils literal notranslate"><span class="pre">Inf</span></code>. Similarly, the smallest positive number is <span class="math notranslate nohighlight">\(2^{-1022}\approx 2\times 10^{-308}\)</span>, and smaller values are said to <span class="target" id="index-8"></span>underflow to zero.<a class="footnote-reference brackets" href="#denormalized" id="id2">2</a></p>
<p>Note the crucial difference between <span class="math notranslate nohighlight">\(\macheps=2^{-52}\)</span>, which is the distance between 1 and the next larger double-precision number, and <span class="math notranslate nohighlight">\(2^{-1022}\)</span>, which is the smallest positive double-precision number. The former has to do with relative precision, while the latter is about absolute precision. Getting close to zero always requires a shift in thinking to absolute precision, because any finite error is infinite relative to zero.</p>
<p>One more double precision value is worthy of note: <a class="reference internal" href="overview.html#term-nan"><span class="xref std std-term">NaN</span></a>, which stands for <strong>Not a Number</strong>. It is the result of an undefined arithmetic operation such as 0/0.</p>
</div>
<div class="section" id="floating-point-arithmetic">
<h2>Floating point arithmetic<a class="headerlink" href="#floating-point-arithmetic" title="Permalink to this headline">Â¶</a></h2>
<p id="index-9">Computer arithmetic is performed on floating-point numbers and returns floating-point results. We assume the existence of machine-analog operations for real functions such as <span class="math notranslate nohighlight">\(+\)</span>, <span class="math notranslate nohighlight">\(-\)</span>, <span class="math notranslate nohighlight">\(\times\)</span>, <span class="math notranslate nohighlight">\(/\)</span>, <span class="math notranslate nohighlight">\(\sqrt{\quad}\)</span>, and so on. Without getting into the details, we will suppose that each elementary machine operation creates a floating point result whose relative error is bounded by <span class="math notranslate nohighlight">\(\macheps\)</span>. For example, if <span class="math notranslate nohighlight">\(x\)</span> and <span class="math notranslate nohighlight">\(y\)</span> are in <span class="math notranslate nohighlight">\(\float\)</span>, then for machine addition <span class="math notranslate nohighlight">\(\oplus\)</span> we have the bound</p>
<div class="math notranslate nohighlight">
\[\frac{|(x \oplus y)-(x+y)|}{|x+y|} \le \macheps.\]</div>
<p>Hence the relative error in arithmetic is practically the same as for the floating point representation itself. However, even playing by these rules can lead to disturbing results.</p>
<div class="proof proof-type-demo">

    <div class="proof-title">
        <span class="proof-type">Demo </span>
        
    </div><div class="proof-content">
<p><a class="reference internal" href="demos/float-arithmetic.html"><span class="doc">Surprising arithmetic</span></a></p>
</div></div><p>There are two ways to look at <a class="reference internal" href="demos/float-arithmetic.html"><span class="doc">Surprising arithmetic</span></a>. On one hand, its two versions of the result differ by less than <span class="math notranslate nohighlight">\(1.2\times 10^{-16}\)</span>, which is very smallânot just in everyday terms, but with respect to the operands, which are all close to 1 in absolute value. On the other hand, the difference is as large as the exact result itself! We formalize and generalize this observation in the next section. In the meantime, keep in mind that exactness cannot be taken for granted in floating point computation. Even ideally, we should not expect that two mathematically equivalent results will be equal, only that they be relatively close together.</p>
</div>
<div class="section" id="exercises">
<h2>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">Â¶</a></h2>
<div class="alert alert-info">
<p class="admonition-title">Note</p>
<p>Exercises marked with âï¸ are intended to be done by hand or with the aid of a simple calculator. Exercises marked with â¨ï¸ are intended to be solved by using a computer.</p>
</div>
<ol>
<li><p>âï¸ Consider a floating point set <span class="math notranslate nohighlight">\(\float\)</span> defined by <a class="reference internal" href="#equation-floatpoint">(1)</a> and <a class="reference internal" href="#equation-mantissa">(2)</a> with <span class="math notranslate nohighlight">\(d=4\)</span>.</p>
<p><strong>(a)</strong> How many elements of <span class="math notranslate nohighlight">\(\float\)</span> are there in the real interval <span class="math notranslate nohighlight">\([1/2,4]\)</span>, including the endpoints?</p>
<p><strong>(b)</strong> What is the element of <span class="math notranslate nohighlight">\(\float\)</span> closest to the real number <span class="math notranslate nohighlight">\(1/10\)</span>?</p>
<p><strong>(c)</strong> What is the smallest positive integer not in <span class="math notranslate nohighlight">\(\float\)</span>?</p>
</li>
<li><p>âï¸ Prove that <a class="reference internal" href="#equation-fpbound">(3)</a> is equivalent to <a class="reference internal" href="#equation-fpboundalt">(4)</a>. (This means showing first that <a class="reference internal" href="#equation-fpbound">(3)</a> implies <a class="reference internal" href="#equation-fpboundalt">(4)</a>, and then separately that <a class="reference internal" href="#equation-fpboundalt">(4)</a> implies <a class="reference internal" href="#equation-fpbound">(3)</a>.)</p></li>
<li><p>â¨ï¸ There are much better rational approximations to <span class="math notranslate nohighlight">\(\pi\)</span> than <span class="math notranslate nohighlight">\(22/7\)</span>. For each one below, find its absolute and relative accuracy, and (rounding down to an integer) the number of accurate digits. (In Julia, the variable <code class="docutils literal notranslate"><span class="pre">pi</span></code> is set to a floating-point approximation to <span class="math notranslate nohighlight">\(\pi\)</span> by default.)</p>
<p><strong>(a)</strong> 355/113</p>
<p><strong>(b)</strong> 103638/32989.</p>
</li>
<li><p>âï¸ IEEE 754 <em>single precision</em> \index{IEEE754} specifies that 23 binary bits are used for the mantissa <span class="math notranslate nohighlight">\(f\)</span> in <a class="reference internal" href="#equation-mantissa">(2)</a>. Because they need less storage space and can be operated on more quickly than double precision values, single precision values can be useful in low-precision applications.</p>
<p><strong>(a)</strong> In base-10 terms, what is the first single precision number greater than <span class="math notranslate nohighlight">\(1\)</span> in this system?</p>
<p><strong>(b)</strong> What is the smallest positive integer that is not a single precision number?</p>
</li>
<li><p>â¨ï¸ Julia defines a function <code class="docutils literal notranslate"><span class="pre">nextfloat</span></code> that gives the next-larger floating-point value of a given number. What is the next float past <code class="docutils literal notranslate"><span class="pre">floatmax</span></code>?</p></li>
<li><p>â¨ï¸ Itâs reasonable to expect that floating point errors accumulate randomly during a long computation, creating what is known as a <em>random walk</em>. On average we expect as many errors to be negative as positive, so they tend to partially cancel out. Suppose we define a random sequence by <span class="math notranslate nohighlight">\(x_0=0\)</span> and <span class="math notranslate nohighlight">\(x_{n}=x_{n-1}\pm 1\)</span> for <span class="math notranslate nohighlight">\(n\ge 1\)</span>, with the signs chosen by tossing a fair coin for each <span class="math notranslate nohighlight">\(n\)</span>. Let <span class="math notranslate nohighlight">\(\alpha_n\)</span> and <span class="math notranslate nohighlight">\(\beta_n\)</span> be the average value of <span class="math notranslate nohighlight">\(x_n\)</span> and <span class="math notranslate nohighlight">\(|x_n|\)</span>, respectively, over all such walks. Then a classic result of probability is that <span class="math notranslate nohighlight">\(\alpha_n=0\)</span> and</p>
<div class="math notranslate nohighlight">
\[\lim_{n\to\infty} \frac{\pi \beta_n^2}{2n}=1.\]</div>
<p>In Julia the function <code class="docutils literal notranslate"><span class="pre">randn</span></code> simulates drawing numbers from the normal or Gaussian distribution (i.e., the bell curve) with mean zero and variance 1. Choose a unique positive integer seed value <span class="math notranslate nohighlight">\(s\)</span> (for example, use the last 5 digits of your phone number) and enter <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">Rand;</span> <span class="pre">Rand.seed!(s)</span></code> to initialize the random number generator. Then the following code generates one random walk for <span class="math notranslate nohighlight">\(n=10^4\)</span>:</p>
<div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="n">r</span> <span class="o">=</span> <span class="n">randn</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>           <span class="c"># draw random numbers</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">sum</span><span class="p">(</span><span class="n">sign</span><span class="p">(</span><span class="n">z</span><span class="p">)</span> <span class="k">for</span> <span class="n">z</span> <span class="kp">in</span> <span class="n">r</span><span class="p">)</span>
</pre></div>
</div>
<p>Perform a million random walks, computing the average values of <span class="math notranslate nohighlight">\(x_{10000}\)</span> and <span class="math notranslate nohighlight">\(|x_{10000}|\)</span>. Compare these to <span class="math notranslate nohighlight">\(\alpha_n=0\)</span> and <span class="math notranslate nohighlight">\(\beta_n\approx \sqrt{2n/\pi}\)</span> at <span class="math notranslate nohighlight">\(n=10000\)</span>.</p>
</li>
</ol>
<hr class="docutils" />
<dl class="footnote brackets">
<dt class="label" id="macheps"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>The terms machine epsilon, machine precision, and unit roundoff arenât used consistently across references, but the differences are minor for our purposes.</p>
</dd>
<dt class="label" id="denormalized"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>Actually, there are some still smaller <em>denormalized</em> numbers that have less precision, but we wonât use that level of detail.</p>
</dd>
</dl>
</div>
</div>


              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="overview.html" title="previous page">Introduction</a>
    <a class='right-next' id="next-link" href="conditioning.html" title="next page">Problems and conditioning</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Tobin A. Driscoll and Richard J. Braun<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    
  </body>
</html>